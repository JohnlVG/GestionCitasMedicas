ƒ
RD:\PruebasDeSoftware\Prueba2U_F\GestionCitasMedicas\GestionCitasMedicas\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
	DotNetEnv 	
.	 

Env
 
. 
Load 
( 
) 
; 
var

 
configuration

 
=

 
builder

 
.

 
Configuration

 )
;

) *
var 
connectionString 
= 
configuration $
.$ %
GetConnectionString% 8
(8 9
$str9 L
)L M
;M N
var 

dbPassword 
= 
Environment 
. "
GetEnvironmentVariable 3
(3 4
$str4 A
)A B
??C E
stringF L
.L M
EmptyM R
;R S
var 
dbUser 

= 
Environment 
. "
GetEnvironmentVariable /
(/ 0
$str0 9
)9 :
??; =
$str> B
;B C
var 
dbServer 
= 
Environment 
. "
GetEnvironmentVariable 1
(1 2
$str2 =
)= >
??? A
$strB M
;M N
var 

dbDatabase 
= 
Environment 
. "
GetEnvironmentVariable 3
(3 4
$str4 A
)A B
??C E
$strF Q
;Q R
connectionString 
= 
$" 
$str 
{ 
dbServer %
}% &
$str& 0
{0 1

dbDatabase1 ;
}; <
$str< E
{E F
dbUserF L
}L M
$strM W
{W X

dbPasswordX b
}b c
$str	c 
"
 ž
;
ž Ÿ
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseSqlServer 
( 
connectionString )
)) *
)* +
;+ ,
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
}   
app"" 
."" 
UseHttpsRedirection"" 
("" 
)"" 
;"" 
app$$ 
.$$ 
UseAuthorization$$ 
($$ 
)$$ 
;$$ 
app&& 
.&& 
MapControllers&& 
(&& 
)&& 
;&& 
await(( 
app(( 	
.((	 

RunAsync((
 
((( 
)(( 
;(( ›e
qD:\PruebasDeSoftware\Prueba2U_F\GestionCitasMedicas\GestionCitasMedicas\Migrations\20250120212500_InitalCreate.cs
	namespace 	
GestionCitasMedicas
 
. 

Migrations (
{ 
public		 

partial		 
class		 
InitalCreate		 %
:		& '
	Migration		( 1
{

 
private 
const 
string '
SqlServerIdentityAnnotation 8
=9 :
$str; O
;O P
private 
const 
string 
Nvarchar100 (
=) *
$str+ :
;: ;
private 
const 
string 
Nvarchar250 (
=) *
$str+ :
;: ;
private 
const 
string 

Nvarchar15 '
=( )
$str* 8
;8 9
private 
const 
string 

CitasTable '
=( )
$str* 1
;1 2
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
IdDoctor 
= 
table $
.$ %
Column% +
<+ ,
int, /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
falseH M
)M N
. 

Annotation #
(# $'
SqlServerIdentityAnnotation$ ?
,? @
$strA G
)G H
,H I
Nombre 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
Nvarchar1008 C
,C D
	maxLengthE N
:N O
$numP S
,S T
nullableU ]
:] ^
false_ d
)d e
,e f
Especialidad  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
Nvarchar100> I
,I J
	maxLengthK T
:T U
$numV Y
,Y Z
nullable[ c
:c d
falsee j
)j k
} 
, 
constraints 
: 
table "
=># %
{ 
table   
.   

PrimaryKey   $
(  $ %
$str  % 2
,  2 3
x  4 5
=>  6 8
x  9 :
.  : ;
IdDoctor  ; C
)  C D
;  D E
}!! 
)!! 
;!! 
migrationBuilder## 
.## 
CreateTable## (
(##( )
name$$ 
:$$ 
$str$$ !
,$$! "
columns%% 
:%% 
table%% 
=>%% !
new%%" %
{&& 

IdPaciente'' 
=''  
table''! &
.''& '
Column''' -
<''- .
int''. 1
>''1 2
(''2 3
type''3 7
:''7 8
$str''9 >
,''> ?
nullable''@ H
:''H I
false''J O
)''O P
.(( 

Annotation(( #
(((# $'
SqlServerIdentityAnnotation(($ ?
,((? @
$str((A G
)((G H
,((H I
Nombre)) 
=)) 
table)) "
.))" #
Column))# )
<))) *
string))* 0
>))0 1
())1 2
type))2 6
:))6 7
Nvarchar100))8 C
,))C D
	maxLength))E N
:))N O
$num))P S
,))S T
nullable))U ]
:))] ^
false))_ d
)))d e
,))e f
Apellido** 
=** 
table** $
.**$ %
Column**% +
<**+ ,
string**, 2
>**2 3
(**3 4
type**4 8
:**8 9
Nvarchar100**: E
,**E F
	maxLength**G P
:**P Q
$num**R U
,**U V
nullable**W _
:**_ `
false**a f
)**f g
,**g h
Telefono++ 
=++ 
table++ $
.++$ %
Column++% +
<+++ ,
string++, 2
>++2 3
(++3 4
type++4 8
:++8 9

Nvarchar15++: D
,++D E
	maxLength++F O
:++O P
$num++Q S
,++S T
nullable++U ]
:++] ^
false++_ d
)++d e
},, 
,,, 
constraints-- 
:-- 
table-- "
=>--# %
{.. 
table// 
.// 

PrimaryKey// $
(//$ %
$str//% 3
,//3 4
x//5 6
=>//7 9
x//: ;
.//; <

IdPaciente//< F
)//F G
;//G H
}00 
)00 
;00 
migrationBuilder22 
.22 
CreateTable22 (
(22( )
name33 
:33 

CitasTable33  
,33  !
columns44 
:44 
table44 
=>44 !
new44" %
{55 
IdCita66 
=66 
table66 "
.66" #
Column66# )
<66) *
int66* -
>66- .
(66. /
type66/ 3
:663 4
$str665 :
,66: ;
nullable66< D
:66D E
false66F K
)66K L
.77 

Annotation77 #
(77# $'
SqlServerIdentityAnnotation77$ ?
,77? @
$str77A G
)77G H
,77H I
Fecha88 
=88 
table88 !
.88! "
Column88" (
<88( )
DateTime88) 1
>881 2
(882 3
type883 7
:887 8
$str889 D
,88D E
nullable88F N
:88N O
false88P U
)88U V
,88V W

IdPaciente99 
=99  
table99! &
.99& '
Column99' -
<99- .
int99. 1
>991 2
(992 3
type993 7
:997 8
$str999 >
,99> ?
nullable99@ H
:99H I
false99J O
)99O P
,99P Q
IdDoctor:: 
=:: 
table:: $
.::$ %
Column::% +
<::+ ,
int::, /
>::/ 0
(::0 1
type::1 5
:::5 6
$str::7 <
,::< =
nullable::> F
:::F G
false::H M
)::M N
};; 
,;; 
constraints<< 
:<< 
table<< "
=><<# %
{== 
table>> 
.>> 

PrimaryKey>> $
(>>$ %
$str>>% /
,>>/ 0
x>>1 2
=>>>3 5
x>>6 7
.>>7 8
IdCita>>8 >
)>>> ?
;>>? @
table?? 
.?? 

ForeignKey?? $
(??$ %
name@@ 
:@@ 
$str@@ :
,@@: ;
columnAA 
:AA 
xAA  !
=>AA" $
xAA% &
.AA& '
IdDoctorAA' /
,AA/ 0
principalTableBB &
:BB& '
$strBB( 2
,BB2 3
principalColumnCC '
:CC' (
$strCC) 3
,CC3 4
onDeleteDD  
:DD  !
ReferentialActionDD" 3
.DD3 4
CascadeDD4 ;
)DD; <
;DD< =
tableEE 
.EE 

ForeignKeyEE $
(EE$ %
nameFF 
:FF 
$strFF =
,FF= >
columnGG 
:GG 
xGG  !
=>GG" $
xGG% &
.GG& '

IdPacienteGG' 1
,GG1 2
principalTableHH &
:HH& '
$strHH( 3
,HH3 4
principalColumnII '
:II' (
$strII) 5
,II5 6
onDeleteJJ  
:JJ  !
ReferentialActionJJ" 3
.JJ3 4
CascadeJJ4 ;
)JJ; <
;JJ< =
}KK 
)KK 
;KK 
migrationBuilderMM 
.MM 
CreateTableMM (
(MM( )
nameNN 
:NN 
$strNN &
,NN& '
columnsOO 
:OO 
tableOO 
=>OO !
newOO" %
{PP 
IdProcedimientoQQ #
=QQ$ %
tableQQ& +
.QQ+ ,
ColumnQQ, 2
<QQ2 3
intQQ3 6
>QQ6 7
(QQ7 8
typeQQ8 <
:QQ< =
$strQQ> C
,QQC D
nullableQQE M
:QQM N
falseQQO T
)QQT U
.RR 

AnnotationRR #
(RR# $'
SqlServerIdentityAnnotationRR$ ?
,RR? @
$strRRA G
)RRG H
,RRH I
DescripcionSS 
=SS  !
tableSS" '
.SS' (
ColumnSS( .
<SS. /
stringSS/ 5
>SS5 6
(SS6 7
typeSS7 ;
:SS; <
Nvarchar250SS= H
,SSH I
	maxLengthSSJ S
:SSS T
$numSSU X
,SSX Y
nullableSSZ b
:SSb c
falseSSd i
)SSi j
,SSj k
CostoTT 
=TT 
tableTT !
.TT! "
ColumnTT" (
<TT( )
decimalTT) 0
>TT0 1
(TT1 2
typeTT2 6
:TT6 7
$strTT8 G
,TTG H
nullableTTI Q
:TTQ R
falseTTS X
)TTX Y
,TTY Z
IdCitaUU 
=UU 
tableUU "
.UU" #
ColumnUU# )
<UU) *
intUU* -
>UU- .
(UU. /
typeUU/ 3
:UU3 4
$strUU5 :
,UU: ;
nullableUU< D
:UUD E
falseUUF K
)UUK L
}VV 
,VV 
constraintsWW 
:WW 
tableWW "
=>WW# %
{XX 
tableYY 
.YY 

PrimaryKeyYY $
(YY$ %
$strYY% 8
,YY8 9
xYY: ;
=>YY< >
xYY? @
.YY@ A
IdProcedimientoYYA P
)YYP Q
;YYQ R
tableZZ 
.ZZ 

ForeignKeyZZ $
(ZZ$ %
name[[ 
:[[ 
$str[[ 2
+[[3 4

CitasTable[[5 ?
+[[@ A
$str[[B K
,[[K L
column\\ 
:\\ 
x\\  !
=>\\" $
x\\% &
.\\& '
IdCita\\' -
,\\- .
principalTable]] &
:]]& '

CitasTable]]( 2
,]]2 3
principalColumn^^ '
:^^' (
$str^^) 1
,^^1 2
onDelete__  
:__  !
ReferentialAction__" 3
.__3 4
Cascade__4 ;
)__; <
;__< =
}`` 
)`` 
;`` 
migrationBuilderbb 
.bb 
CreateIndexbb (
(bb( )
namecc 
:cc 
$strcc )
,cc) *
tabledd 
:dd 

CitasTabledd !
,dd! "
columnee 
:ee 
$stree "
)ee" #
;ee# $
migrationBuildergg 
.gg 
CreateIndexgg (
(gg( )
namehh 
:hh 
$strhh +
,hh+ ,
tableii 
:ii 

CitasTableii !
,ii! "
columnjj 
:jj 
$strjj $
)jj$ %
;jj% &
migrationBuilderll 
.ll 
CreateIndexll (
(ll( )
namemm 
:mm 
$strmm 0
,mm0 1
tablenn 
:nn 
$strnn '
,nn' (
columnoo 
:oo 
$stroo  
)oo  !
;oo! "
}pp 	
	protectedss 
overridess 
voidss 
Downss  $
(ss$ %
MigrationBuilderss% 5
migrationBuilderss6 F
)ssF G
{tt 	
migrationBuilderuu 
.uu 
	DropTableuu &
(uu& '
namevv 
:vv 
$strvv &
)vv& '
;vv' (
migrationBuilderxx 
.xx 
	DropTablexx &
(xx& '
nameyy 
:yy 

CitasTableyy  
)yy  !
;yy! "
migrationBuilder{{ 
.{{ 
	DropTable{{ &
({{& '
name|| 
:|| 
$str||  
)||  !
;||! "
migrationBuilder~~ 
.~~ 
	DropTable~~ &
(~~& '
name 
: 
$str !
)! "
;" #
}
€€ 	
}
 
}‚‚ ë;
TD:\PruebasDeSoftware\Prueba2U_F\GestionCitasMedicas\GestionCitasMedicas\Entidades.cs
	namespace 	
GestionCitasMedicas
 
{ 
public 

static 
class 
	Entidades !
{ 
public 
class 
Paciente 
{ 	
public		 
required		 
int		 

IdPaciente		  *
{		+ ,
get		- 0
;		0 1
set		2 5
;		5 6
}		7 8
[ 
JsonPropertyName 
( 
$str &
)& '
]' (
public 
required 
string "
Nombre# )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
=8 9
string: @
.@ A
EmptyA F
;F G
[ 
JsonPropertyName 
( 
$str (
)( )
]) *
public 
required 
string "
Apellido# +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
=: ;
string< B
.B C
EmptyC H
;H I
[ 
JsonPropertyName 
( 
$str (
)( )
]) *
private 
string 
telefono #
=$ %
string& ,
., -
Empty- 2
;2 3
public 
string 
Telefono "
{ 
get 
=> 
telefono 
;  
set 
{ 
if 
( 
! 
EsTelefonoValido )
() *
value* /
)/ 0
)0 1
throw 
new !
ArgumentException" 3
(3 4
$str4 O
)O P
;P Q
telefono 
= 
value $
;$ %
} 
} 
private 
static 
bool 
EsTelefonoValido  0
(0 1
string1 7
telefono8 @
)@ A
{   
return"" 
telefono"" 
.""  
All""  #
(""# $
char""$ (
.""( )
IsDigit"") 0
)""0 1
&&""2 4
telefono""5 =
.""= >
Length""> D
>=""E G
$num""H I
;""I J
}## 
[&& 

JsonIgnore&& 
]&& 
public'' 
ICollection'' 
<'' 
Cita'' #
>''# $
Citas''% *
{''+ ,
get''- 0
;''0 1
set''2 5
;''5 6
}''7 8
=''9 :
new''; >
List''? C
<''C D
Cita''D H
>''H I
(''I J
)''J K
;''K L
}(( 	
public** 
class** 
Doctor** 
{++ 	
public,, 
required,, 
int,, 
IdDoctor,,  (
{,,) *
get,,+ .
;,,. /
set,,0 3
;,,3 4
},,5 6
[.. 
JsonPropertyName.. 
(.. 
$str.. &
)..& '
]..' (
public// 
required// 
string// "
Nombre//# )
{//* +
get//, /
;/// 0
set//1 4
;//4 5
}//6 7
=//8 9
string//: @
.//@ A
Empty//A F
;//F G
[11 
JsonPropertyName11 
(11 
$str11 ,
)11, -
]11- .
public22 
required22 
string22 "
Especialidad22# /
{220 1
get222 5
;225 6
set227 :
;22: ;
}22< =
=22> ?
string22@ F
.22F G
Empty22G L
;22L M
[55 

JsonIgnore55 
]55 
public66 
ICollection66 
<66 
Cita66 #
>66# $
Citas66% *
{66+ ,
get66- 0
;660 1
set662 5
;665 6
}667 8
=669 :
new66; >
List66? C
<66C D
Cita66D H
>66H I
(66I J
)66J K
;66K L
}77 	
public99 
class99 
Cita99 
{:: 	
public;; 
required;; 
int;; 
IdCita;;  &
{;;' (
get;;) ,
;;;, -
set;;. 1
;;;1 2
};;3 4
[== 
JsonPropertyName== 
(== 
$str== %
)==% &
]==& '
public>> 
required>> 
DateTime>> $
Fecha>>% *
{>>+ ,
get>>- 0
;>>0 1
set>>2 5
;>>5 6
}>>7 8
[@@ 
JsonPropertyName@@ 
(@@ 
$str@@ +
)@@+ ,
]@@, -
publicAA 
requiredAA 
intAA 

IdPacienteAA  *
{AA+ ,
getAA- 0
;AA0 1
setAA2 5
;AA5 6
}AA7 8
[CC 
JsonPropertyNameCC 
(CC 
$strCC )
)CC) *
]CC* +
publicDD 
requiredDD 
intDD 
IdDoctorDD  (
{DD) *
getDD+ .
;DD. /
setDD0 3
;DD3 4
}DD5 6
publicGG 
requiredGG 
PacienteGG $
PacienteGG% -
{GG. /
getGG0 3
;GG3 4
setGG5 8
;GG8 9
}GG: ;
publicHH 
requiredHH 
DoctorHH "
DoctorHH# )
{HH* +
getHH, /
;HH/ 0
setHH1 4
;HH4 5
}HH6 7
[JJ 

JsonIgnoreJJ 
]JJ 
publicKK 
ICollectionKK 
<KK 
ProcedimientoKK ,
>KK, -
ProcedimientosKK. <
{KK= >
getKK? B
;KKB C
setKKD G
;KKG H
}KKI J
=KKK L
newKKM P
ListKKQ U
<KKU V
ProcedimientoKKV c
>KKc d
(KKd e
)KKe f
;KKf g
}LL 	
publicNN 
classNN 
ProcedimientoNN "
{OO 	
publicPP 
requiredPP 
intPP 
IdProcedimientoPP  /
{PP0 1
getPP2 5
;PP5 6
setPP7 :
;PP: ;
}PP< =
[RR 
JsonPropertyNameRR 
(RR 
$strRR +
)RR+ ,
]RR, -
publicSS 
requiredSS 
stringSS "
DescripcionSS# .
{SS/ 0
getSS1 4
;SS4 5
setSS6 9
;SS9 :
}SS; <
=SS= >
stringSS? E
.SSE F
EmptySSF K
;SSK L
[UU 
JsonPropertyNameUU 
(UU 
$strUU %
)UU% &
]UU& '
publicVV 
requiredVV 
decimalVV #
CostoVV$ )
{VV* +
getVV, /
;VV/ 0
setVV1 4
;VV4 5
}VV6 7
[XX 
JsonPropertyNameXX 
(XX 
$strXX '
)XX' (
]XX( )
publicYY 
requiredYY 
intYY 
IdCitaYY  &
{YY' (
getYY) ,
;YY, -
setYY. 1
;YY1 2
}YY3 4
public\\ 
required\\ 
Cita\\  
Cita\\! %
{\\& '
get\\( +
;\\+ ,
set\\- 0
;\\0 1
}\\2 3
}]] 	
}^^ 
}__ ¢4
oD:\PruebasDeSoftware\Prueba2U_F\GestionCitasMedicas\GestionCitasMedicas\Controllers\ProcedimientosController.cs
	namespace 	
GestionCitasMedicas
 
. 
Controllers )
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public		 

class		 $
ProcedimientosController		 )
:		* +
ControllerBase		, :
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public $
ProcedimientosController '
(' (
AppDbContext( 4
context5 <
)< =
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Procedimiento3 @
>@ A
>A B
>B C
GetProcedimientosD U
(U V
)V W
{ 	
return 
await 
_context !
.! "
Procedimientos" 0
.0 1
ToListAsync1 <
(< =
)= >
;> ?
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Procedimiento' 4
>4 5
>5 6
GetProcedimiento7 G
(G H
intH K
idL N
)N O
{ 	
var 
procedimiento 
= 
await  %
_context& .
.. /
Procedimientos/ =
.= >
	FindAsync> G
(G H
idH J
)J K
;K L
if 
( 
procedimiento 
==  
null! %
)% &
{   
return!! 
NotFound!! 
(!!  
)!!  !
;!!! "
}"" 
return$$ 
procedimiento$$  
;$$  !
}%% 	
[(( 	
HttpPost((	 
](( 
public)) 
async)) 
Task)) 
<)) 
ActionResult)) &
<))& '
Procedimiento))' 4
>))4 5
>))5 6
PostProcedimiento))7 H
())H I
Procedimiento))I V
procedimiento))W d
)))d e
{** 	
_context++ 
.++ 
Procedimientos++ #
.++# $
Add++$ '
(++' (
procedimiento++( 5
)++5 6
;++6 7
await,, 
_context,, 
.,, 
SaveChangesAsync,, +
(,,+ ,
),,, -
;,,- .
return.. 
CreatedAtAction.. "
(.." #
nameof..# )
(..) *
GetProcedimiento..* :
)..: ;
,..; <
new..= @
{..A B
id..C E
=..F G
procedimiento..H U
...U V
IdProcedimiento..V e
}..f g
,..g h
procedimiento..i v
)..v w
;..w x
}// 	
[22 	
HttpPut22	 
(22 
$str22 
)22 
]22 
public33 
async33 
Task33 
<33 
IActionResult33 '
>33' (
PutProcedimiento33) 9
(339 :
int33: =
id33> @
,33@ A
Procedimiento33B O
procedimiento33P ]
)33] ^
{44 	
if55 
(55 
id55 
!=55 
procedimiento55 #
.55# $
IdProcedimiento55$ 3
)553 4
{66 
return77 

BadRequest77 !
(77! "
)77" #
;77# $
}88 
_context:: 
.:: 
Entry:: 
(:: 
procedimiento:: (
)::( )
.::) *
State::* /
=::0 1
EntityState::2 =
.::= >
Modified::> F
;::F G
try<< 
{== 
await>> 
_context>> 
.>> 
SaveChangesAsync>> /
(>>/ 0
)>>0 1
;>>1 2
}?? 
catch@@ 
(@@ (
DbUpdateConcurrencyException@@ /
)@@/ 0
{AA 
ifBB 
(BB 
!BB 
ProcedimientoExistsBB (
(BB( )
idBB) +
)BB+ ,
)BB, -
{CC 
returnDD 
NotFoundDD #
(DD# $
)DD$ %
;DD% &
}EE 
elseFF 
{GG 
throwHH 
;HH 
}II 
}JJ 
returnLL 
	NoContentLL 
(LL 
)LL 
;LL 
}MM 	
[PP 	

HttpDeletePP	 
(PP 
$strPP 
)PP 
]PP 
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
IActionResultQQ '
>QQ' (
DeleteProcedimientoQQ) <
(QQ< =
intQQ= @
idQQA C
)QQC D
{RR 	
varSS 
procedimientoSS 
=SS 
awaitSS  %
_contextSS& .
.SS. /
ProcedimientosSS/ =
.SS= >
	FindAsyncSS> G
(SSG H
idSSH J
)SSJ K
;SSK L
ifTT 
(TT 
procedimientoTT 
==TT  
nullTT! %
)TT% &
{UU 
returnVV 
NotFoundVV 
(VV  
)VV  !
;VV! "
}WW 
_contextYY 
.YY 
ProcedimientosYY #
.YY# $
RemoveYY$ *
(YY* +
procedimientoYY+ 8
)YY8 9
;YY9 :
awaitZZ 
_contextZZ 
.ZZ 
SaveChangesAsyncZZ +
(ZZ+ ,
)ZZ, -
;ZZ- .
return\\ 
	NoContent\\ 
(\\ 
)\\ 
;\\ 
}]] 	
private__ 
bool__ 
ProcedimientoExists__ (
(__( )
int__) ,
id__- /
)__/ 0
{`` 	
returnaa 
_contextaa 
.aa 
Procedimientosaa *
.aa* +
Anyaa+ .
(aa. /
eaa/ 0
=>aa1 3
eaa4 5
.aa5 6
IdProcedimientoaa6 E
==aaF H
idaaI K
)aaK L
;aaL M
}bb 	
}cc 
}dd ã2
iD:\PruebasDeSoftware\Prueba2U_F\GestionCitasMedicas\GestionCitasMedicas\Controllers\PacienteController.cs
	namespace 	
GestionCitasMedicas
 
. 
Controllers )
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public		 

class		 
PacientesController		 $
:		% &
ControllerBase		' 5
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
PacientesController "
(" #
AppDbContext# /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Paciente3 ;
>; <
>< =
>= >
GetPacientes? K
(K L
)L M
{ 	
return 
await 
_context !
.! "
	Pacientes" +
.+ ,
ToListAsync, 7
(7 8
)8 9
;9 :
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Paciente' /
>/ 0
>0 1
GetPaciente2 =
(= >
int> A
idB D
)D E
{ 	
var 
paciente 
= 
await  
_context! )
.) *
	Pacientes* 3
.3 4
	FindAsync4 =
(= >
id> @
)@ A
;A B
if 
( 
paciente 
== 
null  
)  !
{   
return!! 
NotFound!! 
(!!  
)!!  !
;!!! "
}"" 
return$$ 
paciente$$ 
;$$ 
}%% 	
[(( 	
HttpPost((	 
](( 
public)) 
async)) 
Task)) 
<)) 
ActionResult)) &
<))& '
Paciente))' /
>))/ 0
>))0 1
PostPaciente))2 >
())> ?
Paciente))? G
paciente))H P
)))P Q
{** 	
_context++ 
.++ 
	Pacientes++ 
.++ 
Add++ "
(++" #
paciente++# +
)+++ ,
;++, -
await,, 
_context,, 
.,, 
SaveChangesAsync,, +
(,,+ ,
),,, -
;,,- .
return.. 
CreatedAtAction.. "
(.." #
nameof..# )
(..) *
GetPaciente..* 5
)..5 6
,..6 7
new..8 ;
{..< =
id..> @
=..A B
paciente..C K
...K L

IdPaciente..L V
}..W X
,..X Y
paciente..Z b
)..b c
;..c d
}// 	
[22 	
HttpPut22	 
(22 
$str22 
)22 
]22 
public33 
async33 
Task33 
<33 
IActionResult33 '
>33' (
PutPaciente33) 4
(334 5
int335 8
id339 ;
,33; <
Paciente33= E
paciente33F N
)33N O
{44 	
if55 
(55 
id55 
!=55 
paciente55 
.55 

IdPaciente55 )
)55) *
{66 
return77 

BadRequest77 !
(77! "
)77" #
;77# $
}88 
_context:: 
.:: 
Entry:: 
(:: 
paciente:: #
)::# $
.::$ %
State::% *
=::+ ,
EntityState::- 8
.::8 9
Modified::9 A
;::A B
try<< 
{== 
await>> 
_context>> 
.>> 
SaveChangesAsync>> /
(>>/ 0
)>>0 1
;>>1 2
}?? 
catch@@ 
(@@ (
DbUpdateConcurrencyException@@ /
)@@/ 0
{AA 
ifBB 
(BB 
!BB 
PacienteExistsBB #
(BB# $
idBB$ &
)BB& '
)BB' (
{CC 
returnDD 
NotFoundDD #
(DD# $
)DD$ %
;DD% &
}EE 
elseFF 
{GG 
throwHH 
;HH 
}II 
}JJ 
returnLL 
	NoContentLL 
(LL 
)LL 
;LL 
}MM 	
[PP 	

HttpDeletePP	 
(PP 
$strPP 
)PP 
]PP 
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
IActionResultQQ '
>QQ' (
DeletePacienteQQ) 7
(QQ7 8
intQQ8 ;
idQQ< >
)QQ> ?
{RR 	
varSS 
pacienteSS 
=SS 
awaitSS  
_contextSS! )
.SS) *
	PacientesSS* 3
.SS3 4
	FindAsyncSS4 =
(SS= >
idSS> @
)SS@ A
;SSA B
ifTT 
(TT 
pacienteTT 
==TT 
nullTT  
)TT  !
{UU 
returnVV 
NotFoundVV 
(VV  
)VV  !
;VV! "
}WW 
_contextYY 
.YY 
	PacientesYY 
.YY 
RemoveYY %
(YY% &
pacienteYY& .
)YY. /
;YY/ 0
awaitZZ 
_contextZZ 
.ZZ 
SaveChangesAsyncZZ +
(ZZ+ ,
)ZZ, -
;ZZ- .
return\\ 
	NoContent\\ 
(\\ 
)\\ 
;\\ 
}]] 	
private__ 
bool__ 
PacienteExists__ #
(__# $
int__$ '
id__( *
)__* +
{`` 	
returnaa 
_contextaa 
.aa 
	Pacientesaa %
.aa% &
Anyaa& )
(aa) *
eaa* +
=>aa, .
eaa/ 0
.aa0 1

IdPacienteaa1 ;
==aa< >
idaa? A
)aaA B
;aaB C
}bb 	
}cc 
}dd ¢2
iD:\PruebasDeSoftware\Prueba2U_F\GestionCitasMedicas\GestionCitasMedicas\Controllers\DoctoresController.cs
	namespace 	
GestionCitasMedicas
 
. 
Controllers )
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public		 

class		 
DoctoresController		 #
:		$ %
ControllerBase		& 4
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
DoctoresController !
(! "
AppDbContext" .
context/ 6
)6 7
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Doctor3 9
>9 :
>: ;
>; <
GetDoctores= H
(H I
)I J
{ 	
return 
await 
_context !
.! "
Doctores" *
.* +
ToListAsync+ 6
(6 7
)7 8
;8 9
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Doctor' -
>- .
>. /
	GetDoctor0 9
(9 :
int: =
id> @
)@ A
{ 	
var 
doctor 
= 
await 
_context '
.' (
Doctores( 0
.0 1
	FindAsync1 :
(: ;
id; =
)= >
;> ?
if 
( 
doctor 
== 
null 
) 
{   
return!! 
NotFound!! 
(!!  
)!!  !
;!!! "
}"" 
return$$ 
doctor$$ 
;$$ 
}%% 	
[(( 	
HttpPost((	 
](( 
public)) 
async)) 
Task)) 
<)) 
ActionResult)) &
<))& '
Doctor))' -
>))- .
>)). /

PostDoctor))0 :
()): ;
Doctor)); A
doctor))B H
)))H I
{** 	
_context++ 
.++ 
Doctores++ 
.++ 
Add++ !
(++! "
doctor++" (
)++( )
;++) *
await,, 
_context,, 
.,, 
SaveChangesAsync,, +
(,,+ ,
),,, -
;,,- .
return.. 
CreatedAtAction.. "
(.." #
nameof..# )
(..) *
	GetDoctor..* 3
)..3 4
,..4 5
new..6 9
{..: ;
id..< >
=..? @
doctor..A G
...G H
IdDoctor..H P
}..Q R
,..R S
doctor..T Z
)..Z [
;..[ \
}// 	
[22 	
HttpPut22	 
(22 
$str22 
)22 
]22 
public33 
async33 
Task33 
<33 
IActionResult33 '
>33' (
	PutDoctor33) 2
(332 3
int333 6
id337 9
,339 :
Doctor33; A
doctor33B H
)33H I
{44 	
if55 
(55 
id55 
!=55 
doctor55 
.55 
IdDoctor55 %
)55% &
{66 
return77 

BadRequest77 !
(77! "
)77" #
;77# $
}88 
_context:: 
.:: 
Entry:: 
(:: 
doctor:: !
)::! "
.::" #
State::# (
=::) *
EntityState::+ 6
.::6 7
Modified::7 ?
;::? @
try<< 
{== 
await>> 
_context>> 
.>> 
SaveChangesAsync>> /
(>>/ 0
)>>0 1
;>>1 2
}?? 
catch@@ 
(@@ (
DbUpdateConcurrencyException@@ /
)@@/ 0
{AA 
ifBB 
(BB 
!BB 
DoctorExistsBB !
(BB! "
idBB" $
)BB$ %
)BB% &
{CC 
returnDD 
NotFoundDD #
(DD# $
)DD$ %
;DD% &
}EE 
elseFF 
{GG 
throwHH 
;HH 
}II 
}JJ 
returnLL 
	NoContentLL 
(LL 
)LL 
;LL 
}MM 	
[PP 	

HttpDeletePP	 
(PP 
$strPP 
)PP 
]PP 
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
IActionResultQQ '
>QQ' (
DeleteDoctorQQ) 5
(QQ5 6
intQQ6 9
idQQ: <
)QQ< =
{RR 	
varSS 
doctorSS 
=SS 
awaitSS 
_contextSS '
.SS' (
DoctoresSS( 0
.SS0 1
	FindAsyncSS1 :
(SS: ;
idSS; =
)SS= >
;SS> ?
ifTT 
(TT 
doctorTT 
==TT 
nullTT 
)TT 
{UU 
returnVV 
NotFoundVV 
(VV  
)VV  !
;VV! "
}WW 
_contextYY 
.YY 
DoctoresYY 
.YY 
RemoveYY $
(YY$ %
doctorYY% +
)YY+ ,
;YY, -
awaitZZ 
_contextZZ 
.ZZ 
SaveChangesAsyncZZ +
(ZZ+ ,
)ZZ, -
;ZZ- .
return\\ 
	NoContent\\ 
(\\ 
)\\ 
;\\ 
}]] 	
private__ 
bool__ 
DoctorExists__ !
(__! "
int__" %
id__& (
)__( )
{`` 	
returnaa 
_contextaa 
.aa 
Doctoresaa $
.aa$ %
Anyaa% (
(aa( )
eaa) *
=>aa+ -
eaa. /
.aa/ 0
IdDoctoraa0 8
==aa9 ;
idaa< >
)aa> ?
;aa? @
}bb 	
}cc 
}ee Ü7
fD:\PruebasDeSoftware\Prueba2U_F\GestionCitasMedicas\GestionCitasMedicas\Controllers\CitasController.cs
	namespace 	
GestionCitasMedicas
 
. 
Controllers )
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public		 

class		 
CitasController		  
:		! "
ControllerBase		# 1
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
CitasController 
( 
AppDbContext +
context, 3
)3 4
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Cita3 7
>7 8
>8 9
>9 :
GetCitas; C
(C D
)D E
{ 	
var 
citas 
= 
await 
_context &
.& '
Citas' ,
. 
Include 
( 
c 
=> 
c 
.  
Paciente  (
)( )
. 
Include 
( 
c 
=> 
c 
.  
Doctor  &
)& '
. 
ToListAsync 
( 
) 
; 
return 
citas 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public   
async   
Task   
<   
ActionResult   &
<  & '
Cita  ' +
>  + ,
>  , -
GetCita  . 5
(  5 6
int  6 9
id  : <
)  < =
{!! 	
var"" 
cita"" 
="" 
await"" 
_context"" %
.""% &
Citas""& +
.## 
Include## 
(## 
c## 
=>## 
c## 
.##  
Paciente##  (
)##( )
.$$ 
Include$$ 
($$ 
c$$ 
=>$$ 
c$$ 
.$$  
Doctor$$  &
)$$& '
.%% 
FirstOrDefaultAsync%% $
(%%$ %
c%%% &
=>%%' )
c%%* +
.%%+ ,
IdCita%%, 2
==%%3 5
id%%6 8
)%%8 9
;%%9 :
if'' 
('' 
cita'' 
=='' 
null'' 
)'' 
{(( 
return)) 
NotFound)) 
())  
)))  !
;))! "
}** 
return,, 
cita,, 
;,, 
}-- 	
[00 	
HttpPost00	 
]00 
public11 
async11 
Task11 
<11 
ActionResult11 &
<11& '
Cita11' +
>11+ ,
>11, -
PostCita11. 6
(116 7
Cita117 ;
cita11< @
)11@ A
{22 	
_context33 
.33 
Citas33 
.33 
Add33 
(33 
cita33 #
)33# $
;33$ %
await44 
_context44 
.44 
SaveChangesAsync44 +
(44+ ,
)44, -
;44- .
return66 
CreatedAtAction66 "
(66" #
nameof66# )
(66) *
GetCita66* 1
)661 2
,662 3
new664 7
{668 9
id66: <
=66= >
cita66? C
.66C D
IdCita66D J
}66K L
,66L M
cita66N R
)66R S
;66S T
}77 	
[:: 	
HttpPut::	 
(:: 
$str:: 
):: 
]:: 
public;; 
async;; 
Task;; 
<;; 
IActionResult;; '
>;;' (
PutCita;;) 0
(;;0 1
int;;1 4
id;;5 7
,;;7 8
Cita;;9 =
cita;;> B
);;B C
{<< 	
if== 
(== 
id== 
!=== 
cita== 
.== 
IdCita== !
)==! "
{>> 
return?? 

BadRequest?? !
(??! "
)??" #
;??# $
}@@ 
_contextBB 
.BB 
EntryBB 
(BB 
citaBB 
)BB  
.BB  !
StateBB! &
=BB' (
EntityStateBB) 4
.BB4 5
ModifiedBB5 =
;BB= >
tryDD 
{EE 
awaitFF 
_contextFF 
.FF 
SaveChangesAsyncFF /
(FF/ 0
)FF0 1
;FF1 2
}GG 
catchHH 
(HH (
DbUpdateConcurrencyExceptionHH /
)HH/ 0
{II 
ifJJ 
(JJ 
!JJ 

CitaExistsJJ 
(JJ  
idJJ  "
)JJ" #
)JJ# $
{KK 
returnLL 
NotFoundLL #
(LL# $
)LL$ %
;LL% &
}MM 
elseNN 
{OO 
throwPP 
;PP 
}QQ 
}RR 
returnTT 
	NoContentTT 
(TT 
)TT 
;TT 
}UU 	
[XX 	

HttpDeleteXX	 
(XX 
$strXX 
)XX 
]XX 
publicYY 
asyncYY 
TaskYY 
<YY 
IActionResultYY '
>YY' (

DeleteCitaYY) 3
(YY3 4
intYY4 7
idYY8 :
)YY: ;
{ZZ 	
var[[ 
cita[[ 
=[[ 
await[[ 
_context[[ %
.[[% &
Citas[[& +
.[[+ ,
	FindAsync[[, 5
([[5 6
id[[6 8
)[[8 9
;[[9 :
if\\ 
(\\ 
cita\\ 
==\\ 
null\\ 
)\\ 
{]] 
return^^ 
NotFound^^ 
(^^  
)^^  !
;^^! "
}__ 
_contextaa 
.aa 
Citasaa 
.aa 
Removeaa !
(aa! "
citaaa" &
)aa& '
;aa' (
awaitbb 
_contextbb 
.bb 
SaveChangesAsyncbb +
(bb+ ,
)bb, -
;bb- .
returndd 
	NoContentdd 
(dd 
)dd 
;dd 
}ee 	
privategg 
boolgg 

CitaExistsgg 
(gg  
intgg  #
idgg$ &
)gg& '
{hh 	
returnii 
_contextii 
.ii 
Citasii !
.ii! "
Anyii" %
(ii% &
eii& '
=>ii( *
eii+ ,
.ii, -
IdCitaii- 3
==ii4 6
idii7 9
)ii9 :
;ii: ;
}jj 	
}kk 
}ll ¤E
WD:\PruebasDeSoftware\Prueba2U_F\GestionCitasMedicas\GestionCitasMedicas\AppDbContext.cs
	namespace 	
GestionCitasMedicas
 
{ 
public 

class 
AppDbContext 
: 
	DbContext  )
{		 
public 
AppDbContext 
( 
DbContextOptions ,
<, -
AppDbContext- 9
>9 :
options; B
)B C
:D E
baseF J
(J K
optionsK R
)R S
{T U
}V W
public 
DbSet 
< 
	Entidades 
. 
Paciente '
>' (
	Pacientes) 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
=A B
nullC G
!G H
;H I
public 
DbSet 
< 
	Entidades 
. 
Doctor %
>% &
Doctores' /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
=> ?
null@ D
!D E
;E F
public 
DbSet 
< 
	Entidades 
. 
Cita #
># $
Citas% *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
=9 :
null; ?
!? @
;@ A
public 
DbSet 
< 
	Entidades 
. 
Procedimiento ,
>, -
Procedimientos. <
{= >
get? B
;B C
setD G
;G H
}I J
=K L
nullM Q
!Q R
;R S
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. 
Entity 
<  
	Entidades  )
.) *
Paciente* 2
>2 3
(3 4
entity4 :
=>; =
{ 
entity 
. 
ToTable 
( 
$str *
)* +
;+ ,
entity 
. 
HasKey 
( 
p 
=>  "
p# $
.$ %

IdPaciente% /
)/ 0
;0 1
entity 
. 
Property 
(  
p  !
=>" $
p% &
.& '
Nombre' -
)- .
.. /

IsRequired/ 9
(9 :
): ;
.; <
HasMaxLength< H
(H I
$numI L
)L M
;M N
entity 
. 
Property 
(  
p  !
=>" $
p% &
.& '
Apellido' /
)/ 0
.0 1

IsRequired1 ;
(; <
)< =
.= >
HasMaxLength> J
(J K
$numK N
)N O
;O P
entity 
. 
Property 
(  
p  !
=>" $
p% &
.& '
Telefono' /
)/ 0
.0 1
HasMaxLength1 =
(= >
$num> @
)@ A
;A B
}   
)   
;   
modelBuilder## 
.## 
Entity## 
<##  
	Entidades##  )
.##) *
Doctor##* 0
>##0 1
(##1 2
entity##2 8
=>##9 ;
{$$ 
entity%% 
.%% 
ToTable%% 
(%% 
$str%% )
)%%) *
;%%* +
entity&& 
.&& 
HasKey&& 
(&& 
d&& 
=>&&  "
d&&# $
.&&$ %
IdDoctor&&% -
)&&- .
;&&. /
entity'' 
.'' 
Property'' 
(''  
d''  !
=>''" $
d''% &
.''& '
Nombre''' -
)''- .
.''. /

IsRequired''/ 9
(''9 :
)'': ;
.''; <
HasMaxLength''< H
(''H I
$num''I L
)''L M
;''M N
entity(( 
.(( 
Property(( 
(((  
d((  !
=>((" $
d((% &
.((& '
Especialidad((' 3
)((3 4
.((4 5

IsRequired((5 ?
(((? @
)((@ A
.((A B
HasMaxLength((B N
(((N O
$num((O R
)((R S
;((S T
})) 
))) 
;)) 
modelBuilder,, 
.,, 
Entity,, 
<,,  
	Entidades,,  )
.,,) *
Cita,,* .
>,,. /
(,,/ 0
entity,,0 6
=>,,7 9
{-- 
entity.. 
... 
ToTable.. 
(.. 
$str.. &
)..& '
;..' (
entity// 
.// 
HasKey// 
(// 
c// 
=>//  "
c//# $
.//$ %
IdCita//% +
)//+ ,
;//, -
entity00 
.00 
Property00 
(00  
c00  !
=>00" $
c00% &
.00& '
Fecha00' ,
)00, -
.00- .

IsRequired00. 8
(008 9
)009 :
;00: ;
entity22 
.22 
HasOne22 
(22 
c22 
=>22  "
c22# $
.22$ %
Paciente22% -
)22- .
.33 
WithMany33 
(33  
p33  !
=>33" $
p33% &
.33& '
Citas33' ,
)33, -
.44 
HasForeignKey44 $
(44$ %
c44% &
=>44' )
c44* +
.44+ ,

IdPaciente44, 6
)446 7
.55 
OnDelete55 
(55  
DeleteBehavior55  .
.55. /
Cascade55/ 6
)556 7
;557 8
entity77 
.77 
HasOne77 
(77 
c77 
=>77  "
c77# $
.77$ %
Doctor77% +
)77+ ,
.88 
WithMany88 
(88  
d88  !
=>88" $
d88% &
.88& '
Citas88' ,
)88, -
.99 
HasForeignKey99 $
(99$ %
c99% &
=>99' )
c99* +
.99+ ,
IdDoctor99, 4
)994 5
.:: 
OnDelete:: 
(::  
DeleteBehavior::  .
.::. /
Cascade::/ 6
)::6 7
;::7 8
};; 
);; 
;;; 
modelBuilder>> 
.>> 
Entity>> 
<>>  
	Entidades>>  )
.>>) *
Procedimiento>>* 7
>>>7 8
(>>8 9
entity>>9 ?
=>>>@ B
{?? 
entity@@ 
.@@ 
ToTable@@ 
(@@ 
$str@@ /
)@@/ 0
;@@0 1
entityAA 
.AA 
HasKeyAA 
(AA 
pAA 
=>AA  "
pAA# $
.AA$ %
IdProcedimientoAA% 4
)AA4 5
;AA5 6
entityBB 
.BB 
PropertyBB 
(BB  
pBB  !
=>BB" $
pBB% &
.BB& '
DescripcionBB' 2
)BB2 3
.BB3 4

IsRequiredBB4 >
(BB> ?
)BB? @
.BB@ A
HasMaxLengthBBA M
(BBM N
$numBBN Q
)BBQ R
;BBR S
entityCC 
.CC 
PropertyCC 
(CC  
pCC  !
=>CC" $
pCC% &
.CC& '
CostoCC' ,
)CC, -
.CC- .

IsRequiredCC. 8
(CC8 9
)CC9 :
.CC: ;
HasColumnTypeCC; H
(CCH I
$strCCI X
)CCX Y
;CCY Z
entityEE 
.EE 
HasOneEE 
(EE 
pEE 
=>EE  "
pEE# $
.EE$ %
CitaEE% )
)EE) *
.FF 
WithManyFF 
(FF  
cFF  !
=>FF" $
cFF% &
.FF& '
ProcedimientosFF' 5
)FF5 6
.GG 
HasForeignKeyGG $
(GG$ %
pGG% &
=>GG' )
pGG* +
.GG+ ,
IdCitaGG, 2
)GG2 3
.HH 
OnDeleteHH 
(HH  
DeleteBehaviorHH  .
.HH. /
CascadeHH/ 6
)HH6 7
;HH7 8
}II 
)II 
;II 
}JJ 	
}KK 
}LL 